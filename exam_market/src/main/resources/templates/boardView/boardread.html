<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	  xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
<meta charset="UTF-8">
<title>íŒë§¤ ì •ë³´</title>
<script>
	function deleteBoard(num){
		let result = confirm("ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?");
		if(result == true){
			 location.href="delete?boardnum="+num;
		}
	}
	
	function validation(){
		let replytext = document.getElementById("replytext").value;
		if(replytext.length < 3){
			alert("ëŒ“ê¸€ì€ 3ê¸€ì ì´ìƒë¶€í„° ì‘ì„± ê°€ëŠ¥í•©ë‹ˆë‹¤ğŸ˜¥");
			return false;
		}
		return true;
	}
	
</script>
</head>
<body>
	<h1>[íŒë§¤ ì •ë³´]</h1>
	
	<main class="main">
	
		<div th:if="${board != null}" class="list">
			<table>
				<tr>
		            <th class="texta">ì‘ì„±ì</th>
					<td th:text="${b.memberid}"></td>
				</tr>
				<tr>
		            <th class="texta">ì‘ì„±ì¼</th>
					<td th:text="${b.inputdate}"></td>
		        </tr>
				<tr>
		            <th class="texta">ì œëª©</th>
					<td th:text="${b.title}"></td>
				</tr>
				<tr>
					<th class="texta">ë‚´ìš©</th>
					<td id="contents">
						<pre th:text="${b.contents}"></pre>
					</td>				
				</tr>
				<tr>
					<td colspan="2" class="bottom-container">
							<span th:if="${#authentication.name} == ${b.memberid}">
								<a th:href="|javascript:deleteBoard(boardnum=${b.boardnum})|" class="bottom">
									<button class="bottom">ì‚­ì œ</button>
							   </a>				   
							</span>
							<span th:if="${#authentication.name} != ${b.memberid}">
								<a th:href="" class="bottom">
									<button class="bottom">êµ¬ë§¤í•˜ê¸°</button>
							   </a>				   
							</span>
							<a th:href="@{/board/list}">
								<input type="button" value="ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸°"><br><br>
							</a>
					</td>
				</tr>
			</table>
			
			<div class="bottom-container">
				<!-- ë¦¬í”Œ ì‘ì„± í¼ -->
				<!-- ì‘ì„±í•œ ê¸€ ë‚´ìš©, ê¸€ë²ˆí˜¸ë¥¼ ì„œë²„ë¡œ ì „ì†¡í•˜ì—¬ DBì— ì €ì¥ -->
				<form th:action="@{/board/writeReply}" method="post" onsubmit="return validation()">
				<input type="text" name="replytext" id="replytext">
				<input type="hidden" name="boardnum" th:value="${b.boardnum}">&nbsp;
				<input type="submit" value="í™•ì¸"><br><br>
				</form>
				<!-- ë¦¬í”Œ ëª©ë¡ -->
				<br>
				<table class="replylist" th:if="${reply != null}">
					<tr th:each="reply:${reply}">
						<th th:text="${reply.memberid}"></th>
						<td th:text="${reply.replytext}"></td>
						<td class="list_right" th:text="${reply.inputdate}"></td>
					</tr>
				</table>
			</div>
		</div>
	</main>
</body>
</html>